<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/indext6.css">
    <title>Document</title>
</head>

<body>
    <nav>
        <div class="nav-start">
            <a href="index.html"><img src="img/logo.png" alt=""></a>
        </div>
        <div class="nav-end">
            <ul id="menuXDX">
                <li><a class="btnXD" target="_blank" href="dt.html">Document</a></li>
                <li class="drob">
                    <a class="btnXD" href="register.html">Signup</a>
                    <!-- <ul class="menudrob">
                        <li><a class="menulink" href="">1</a></li>
                        <li><a class="menulink" href="">1</a></li>
                        <li><a class="menulink" href="">1</a></li>
                    </ul> -->
                </li>
                <li><a class="btnXD" href="cookie.html">Login</a></li>
            </ul>
        </div>
    </nav>
    <div class="box">

        <div class="contentcontainer">
            <div class="boxcontext">
                <div class="contentstart" id="contentstartXD">
                    <!-- <span class="titelast">The Last Kamen Rider: Kamen Rider Gates</span>
                    <span class="lastlogo"><img src="img/Kamen_Rider_Geats_Logo.png" alt=""></span>
                    <img class="imglast" src="img/lastrider.jpg" alt=""> -->
                </div>
                <div class="contentend" id="contentendXD">
                </div>
            </div>
            <!-- <div class="boxheadf">
                <p class="bocfera" style="text-align: center;">Top 5 Kamen Rider Vote</p>
            </div>
            <div class="hboxfirst">
                <div class="boxfirstrider">
                    <div class="cardrider">
                        <div class="imgkamenf">
                            <img data-name="v1" class="imgfirstX" src="img\logorider\showa\01.png" alt="">
                        </div>
                        <div data-name="v1" class="card-title">
                            <span>Kamen rider v1</span>
                        </div>
                    </div>
                    <div class="cardrider">
                        <div class="imgkamenf">
                            <img data-name="kuga" class="imgfirstX" src="img\logorider\Heisei\01.webp" alt="">
                        </div>
                        <div data-name="kuga" class="card-title">
                            <span>Kamen rider kuuga</span>
                        </div>
                    </div>
                    <div class="cardrider">
                        <div class="imgkamenf">
                            <img data-name="zeroone" class="imgfirstX" src="img\logorider\Reiwa\01.webp" alt="">
                        </div>
                        <div data-name="zeroone" class="card-title">
                            <span>Kamen rider zero one</span>
                        </div>
                    </div>
                    <div class="cardrider">
                        <div class="imgkamenf">
                            <img data-name="zeroone" class="imgfirstX" src="img\logorider\Heisei\02.webp" alt="">
                        </div>
                        <div data-name="zeroone" class="card-title">
                            <span>Kamen rider zero one</span>
                        </div>
                    </div>
                    <div class="cardrider">
                        <div class="imgkamenf">
                            <img data-name="zeroone" class="imgfirstX" src="img\logorider\Heisei\03.webp" alt="">
                        </div>
                        <div data-name="zeroone" class="card-title">
                            <span>Kamen rider zero one</span>
                        </div>
                    </div>
                </div>
            </div> -->

            <!-- <div class="boxlogo">
                <div class="logotitel">
                    <div class="linex"></div>
                    <span class="nameeraX">Showa</span>
                    <div class="linex"></div>
                </div>
                <div class="logocontainer">
                    <div class="boxlogoimg showabox">
                        <div class="boximgtitle">
                            <div class="boxtimg">
                                <img src="img/logorider/showa/01.png" alt="">
                            </div>
                            <span>Kamen Rider</span>
                        </div>
                    </div>
                </div>
                <div class="logotitel">
                    <div class="linex"></div>
                    <span class="nameeraX">Heisei</span>
                    <div class="linex"></div>
                </div>
                <div class="logocontainer">
                    <div class="boxlogoimg heisebox">

                    </div>
                </div>
                <div class="logotitel">
                    <div class="linex"></div>
                    <span class="nameeraX">Reiwa</span>
                    <div class="linex"></div>
                </div>
            </div> -->
        </div>
    </div>
    <div class="databox">
        <div class="datakamenbox">
            <div class="navdataXD">
                <ul>
                    <li id="menuiconXD" data-name="showa" class="activenav">
                        <button data-name="showa" id="menulinkdata" class="menulinkdata" type="button">Showa</button>
                    </li>
                    <li id="menuiconXD" data-name="heisei">
                        <button data-name="heisei" id="menulinkdata" class="menulinkdata" type="button">Heisei</button>
                    </li>
                    <li id="menuiconXD">
                        <button data-name="reiwa" data-name="reiwa" id="menulinkdata" class="menulinkdata" type="button">Reiwa</button>
                    </li>
                </ul>
            </div>
            <div class="navdata">
                <div id="boxiconx" class="boxiconx">
                </div>
            </div>

        </div>
    </div>
</body>
<script src="js/observer copy.js"></script>
<script>
    var boxlogoimg = document.querySelector('.boxlogoimg')
    var showabox = document.querySelector('.showabox')
    var heisebox = document.querySelector('.heisebox')
    var imgfirstX = document.querySelectorAll('.imgfirstX')
    var cardtitle = document.querySelectorAll('.card-title')
    var menuXDX = document.getElementById('menuXDX');
    var boxiconx = document.getElementById('boxiconx');
    var menulinkdata = document.querySelectorAll('#menulinkdata')
    var menuiconXD = document.querySelectorAll('#menuiconXD')
    var slidex = null;
    var datashowa = null;
    var dataheisei = null;
    var datareiwa = null;
    var dataera = null;
    var erabox = document.querySelectorAll('.erabox');
    var datalastkamen = null;


    menulinkdata.forEach(e => {

        e.addEventListener('click', (ex) => {
            console.log(ex.target.dataset.name);
            if (ex.target.dataset.name == 'showa') {
                boxiconx.innerHTML = "";
                menuiconXD.forEach(e => {
                    if (e.getAttribute('data-name') == ex.target.dataset.name) {
                        e.classList.add('activenav')
                    } else {
                        e.classList.remove('activenav')
                    }
                })
                console.log(datashowa);
                for (const key in datashowa) {
                    let cardicon = document.createElement('div')
                    cardicon.classList.add('cardicon')
                    boxiconx.appendChild(cardicon)
                    let divas = document.createElement('a')
                    divas.href = "showkamen.html"
                    cardicon.appendChild(divas)
                    let imgxd = document.createElement('img')
                    imgxd.classList.add('imgiconX')
                    imgxd.src = 'img/logorider/' + datashowa[key].kamen_img
                    divas.appendChild(imgxd)
                    let nametag = document.createElement('div')
                    nametag.classList.add('nametag')
                    nametag.textContent = datashowa[key].kamen_name
                    cardicon.appendChild(nametag)
                }
            } else if (ex.target.dataset.name == 'heisei') {
                boxiconx.innerHTML = "";
                menuiconXD.forEach(e => {
                    if (e.getAttribute('data-name') == ex.target.dataset.name) {
                        e.classList.add('activenav')
                    } else {
                        e.classList.remove('activenav')
                    }
                })

                for (const key in dataheisei) {
                    let cardicon = document.createElement('div')
                    cardicon.classList.add('cardicon')
                    boxiconx.appendChild(cardicon)
                    let divas = document.createElement('a')
                    divas.href = "showkamen.html"
                    cardicon.appendChild(divas)
                    let imgxd = document.createElement('img')
                    imgxd.classList.add('imgiconX')
                    imgxd.src = 'img/logorider/' + dataheisei[key].kamen_img
                    divas.appendChild(imgxd)
                    let nametag = document.createElement('div')
                    nametag.classList.add('nametag')
                    nametag.textContent = dataheisei[key].kamen_name
                    cardicon.appendChild(nametag)
                }

            } else if (ex.target.dataset.name == 'reiwa') {
                boxiconx.innerHTML = "";
                menuiconXD.forEach(e => {
                    if (e.getAttribute('data-name') == ex.target.dataset.name) {
                        e.classList.add('activenav')
                    } else {
                        e.classList.remove('activenav')
                    }
                })
                for (const key in datareiwa) {
                    let cardicon = document.createElement('div')
                    cardicon.classList.add('cardicon')
                    boxiconx.appendChild(cardicon)
                    let divas = document.createElement('a')
                    divas.href = "showkamen.html"
                    cardicon.appendChild(divas)
                    let imgxd = document.createElement('img')
                    imgxd.classList.add('imgiconX')
                    imgxd.src = 'img/logorider/' + datareiwa[key].kamen_img
                    divas.appendChild(imgxd)
                    let nametag = document.createElement('div')
                    nametag.classList.add('nametag')
                    nametag.textContent = datareiwa[key].kamen_name
                    cardicon.appendChild(nametag)
                }
            }
        })
    })

    imgfirstX.forEach(e => {
        e.addEventListener('mouseover', ex => {
            // console.log(ex.target.dataset.name);
            cardtitle.forEach(e => {
                if (ex.target.dataset.name == e.dataset.name) {
                    // console.log("OK");
                    e.style.width = "100%"
                    e.style.opacity = "1"
                    e.style.height = "auto"
                }
            })
        })
    })

    function Checkcook(cookname) {
        var coookie = document.cookie.split(';')
        for (const key in coookie) {
            var cookies = coookie[key].trim();
            if (cookies.indexOf(cookname) === 0) {
                cookbool = true
                break
            } else {
                cookbool = false
            }
        }
    }

    function getcook(cookname) {
        var coookie = document.cookie.split(';')
        for (const key in coookie) {
            var cookies = coookie[key].trim();
            if (cookies.indexOf(cookname) === 0) {
                return cookies.substring(cookname.length + 1, cookies.length);
            }
        }
        return null
    }

    window.onload = async() => {
        getcookXD();
        getdataindex()
    }

    async function getdataindex() {
        try {
            const resx = await fetch('php/rest.php?dataindex=OK', {
                method: 'GET'
            })
            if (resx.ok) {
                const datax = await resx.json();
                var datakamecX = datax.datakamen;
                dataera = datax.dataera;
                datashowa = datakamecX.filter((e) => {
                    return e.era_name == "Showa"
                })
                dataheisei = datakamecX.filter((e) => {
                    return e.era_name == "Heisei"
                })
                datareiwa = datakamecX.filter((e) => {
                    return e.era_name == "Reiwa"
                })
                console.log(datax);
                datalastkamen = datax.datakamen[datax.datakamen.length - 1];
                // console.log(datalastkamen);
                createicon();
            } else {
                throw new Error(resx.status)
            }
        } catch (ex) {
            console.log(ex.message);
        }
    }

    function createicon() {
        console.log(datashowa[0].kamen_id);
        for (const key in datashowa) {
            let cardicon = document.createElement('div')
            cardicon.classList.add('cardicon')
            boxiconx.appendChild(cardicon)
            let divas = document.createElement('a')
            divas.href = "showkamen.html"
            cardicon.appendChild(divas)
            let imgxd = document.createElement('img')
            imgxd.classList.add('imgiconX')
            imgxd.src = 'img/logorider/' + datashowa[key].kamen_img
            divas.appendChild(imgxd)
            let nametag = document.createElement('div')
            nametag.classList.add('nametag')
            nametag.textContent = datashowa[key].kamen_name
            cardicon.appendChild(nametag)
        }
        for (const key in dataera) {
            document.getElementById('contentendXD').innerHTML += '<div class="erabox">' +
                '<div class="imgbox">' +
                '  <img src="img/logoera/' + dataera[key].era_img + '" alt="">' +
                '  </div>' +
                ' <div class="eraname">' +
                ' <span>' + dataera[key].era_description +
                '</span>' +
                ' </div>' +
                '</div>'
        }
        erabox = document.querySelectorAll('.erabox');
        console.log(erabox);
        erabox.forEach(era => {
            oberabox.observe(era)
        })
        document.getElementById('contentstartXD').innerHTML = '<span class="titelast">The Last Kamen Rider: ' + datalastkamen.kamen_name + '</span>' +
            '<span class="lastlogo"><img src="img/logoseries/' + datalastkamen.kamen_logo + '" alt=""></span>' +
            '<img class="imglast" src="img/wallpaper/' + datalastkamen.kamen_wallpaper + '" alt="">'
        opcity.observe(document.querySelector('.contentstart'))
    }


    async function getcookXD() {
        Checkcook("username")
        console.log(cookbool);
        if (cookbool === true) {
            try {
                const resx = await fetch('php/rest.php?user=' + getcook("username"), {
                    method: 'GET'
                })
                if (resx.ok) {
                    const datax = await resx.json();
                    console.log(datax);
                    menuXDX.innerHTML = '<li><a class="btnXD" target="_blank" href="dt.html">Document</a></li>' +
                        ' <li class="drob">' +
                        '  <a class="btnXD" href="#">' + (datax[0].u_username) + '</a>' +
                        '  <ul class="menudrob">' +
                        '<li><a class="menulink" href="php/logout.php">logout</a></li>' +
                        ' </ul>' +
                        ' </li>'
                } else {
                    throw new Error(resx.status)
                }
            } catch (ex) {
                console.log(ex.message);
            }
        } else {
            menuXDX.innerHTML = '<li><a class="btnXD" target="_blank" href="dt.html">Document</a></li>' +
                ' <li class="drob">' +
                '  <a class="btnXD" href="register.html">Signup</a>' +
                ' </li>' +
                '<li><a class="btnXD" href="cookie.html">Login</a></li>'
        }
    }
</script>


</html>